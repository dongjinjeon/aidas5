{
    "info": {
        "_postman_id": "7f8e9b5c-1234-5678-90ab-cdef12345678",
        "name": "AIDAS Wallet API (with Auth)",
        "description": "AIDAS 지갑 시스템 API 문서 (Supabase 인증 포함)",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Auth",
            "item": [
                {
                    "name": "Supabase Login",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "",
                                    "if (jsonData.access_token) {",
                                    "    pm.environment.set(\"access_token\", jsonData.access_token);",
                                    "    pm.environment.set(\"refresh_token\", jsonData.refresh_token);",
                                    "    pm.environment.set(\"user_id\", jsonData.user.id);",
                                    "    console.log('Token saved successfully');",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "apikey",
                                "value": "{{supabase_anon_key}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"{{supabase_test_email}}\",\n    \"password\": \"{{supabase_test_password}}\"\n}"
                        },
                        "url": {
                            "raw": "{{supabase_url}}/auth/v1/token?grant_type=password",
                            "host": ["{{supabase_url}}"],
                            "path": ["auth", "v1", "token"],
                            "query": [
                                {
                                    "key": "grant_type",
                                    "value": "password"
                                }
                            ]
                        },
                        "description": "Supabase 인증을 사용하여 로그인합니다."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"test@example.com\",\n    \"password\": \"password123\"\n}"
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "header": [],
                            "cookie": [],
                            "body": "{\n    \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"token_type\": \"bearer\",\n    \"expires_in\": 3600,\n    \"refresh_token\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n    \"user\": {\n        \"id\": \"user-uuid\",\n        \"email\": \"test@example.com\"\n    }\n}"
                        }
                    ]
                }
            ]
        },
        {
            "name": "Balance",
            "item": [
                {
                    "name": "Get Balance",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "// Verify token exists",
                                    "if (!pm.environment.get(\"access_token\")) {",
                                    "    console.error(\"No access token found. Please login first.\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "action",
                                    "value": "get_balance",
                                    "type": "text"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/api/wallet/balance.php",
                            "host": ["{{base_url}}"],
                            "path": ["api", "wallet", "balance.php"]
                        },
                        "description": "사용자의 지갑 잔액을 조회합니다."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "action",
                                            "value": "get_balance",
                                            "type": "text"
                                        }
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "header": [
                                {
                                    "key": "Content-Type",
                                    "value": "application/json"
                                }
                            ],
                            "cookie": [],
                            "body": "{\n    \"success\": true,\n    \"data\": {\n        \"bnb_balance\": \"0.00000000\",\n        \"poten_balance\": \"0.00000000\",\n        \"token_fee\": \"0.00000000\"\n    }\n}"
                        }
                    ]
                }
            ]
        },
        {
            "name": "Rewards",
            "item": [
                {
                    "name": "Claim Daily Reward",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "// Verify token exists",
                                    "if (!pm.environment.get(\"access_token\")) {",
                                    "    console.error(\"No access token found. Please login first.\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "action",
                                    "value": "claim_daily",
                                    "type": "text"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/api/wallet/rewards.php",
                            "host": ["{{base_url}}"],
                            "path": ["api", "wallet", "rewards.php"]
                        },
                        "description": "일일 보상을 청구합니다."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "action",
                                            "value": "claim_daily",
                                            "type": "text"
                                        }
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "header": [
                                {
                                    "key": "Content-Type",
                                    "value": "application/json"
                                }
                            ],
                            "cookie": [],
                            "body": "{\n    \"success\": true,\n    \"data\": {\n        \"reward_amount\": \"10.0\",\n        \"reward_type\": \"POTEN\"\n    }\n}"
                        }
                    ]
                },
                {
                    "name": "Claim Mission Reward",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "// Verify token exists",
                                    "if (!pm.environment.get(\"access_token\")) {",
                                    "    console.error(\"No access token found. Please login first.\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "action",
                                    "value": "claim_mission",
                                    "type": "text"
                                },
                                {
                                    "key": "mission_id",
                                    "value": "1",
                                    "type": "text"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/api/wallet/rewards.php",
                            "host": ["{{base_url}}"],
                            "path": ["api", "wallet", "rewards.php"]
                        },
                        "description": "미션 보상을 청구합니다."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "action",
                                            "value": "claim_mission",
                                            "type": "text"
                                        },
                                        {
                                            "key": "mission_id",
                                            "value": "1",
                                            "type": "text"
                                        }
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "header": [
                                {
                                    "key": "Content-Type",
                                    "value": "application/json"
                                }
                            ],
                            "cookie": [],
                            "body": "{\n    \"success\": true,\n    \"data\": {\n        \"reward_amount\": \"10.0\",\n        \"reward_type\": \"POTEN\"\n    }\n}"
                        }
                    ]
                }
            ]
        },
        {
            "name": "Referral",
            "item": [
                {
                    "name": "Get Referral Info",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "// Verify token exists",
                                    "if (!pm.environment.get(\"access_token\")) {",
                                    "    console.error(\"No access token found. Please login first.\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "action",
                                    "value": "get_info",
                                    "type": "text"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/api/wallet/referral.php",
                            "host": ["{{base_url}}"],
                            "path": ["api", "wallet", "referral.php"]
                        },
                        "description": "추천인 정보를 조회합니다."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "action",
                                            "value": "get_info",
                                            "type": "text"
                                        }
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "header": [
                                {
                                    "key": "Content-Type",
                                    "value": "application/json"
                                }
                            ],
                            "cookie": [],
                            "body": "{\n    \"success\": true,\n    \"data\": {\n        \"referral_code\": \"ABC123\",\n        \"referral_link\": \"https://example.com/ref/ABC123\"\n    }\n}"
                        }
                    ]
                },
                {
                    "name": "Get Referral Rewards",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "// Verify token exists",
                                    "if (!pm.environment.get(\"access_token\")) {",
                                    "    console.error(\"No access token found. Please login first.\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "action",
                                    "value": "get_rewards",
                                    "type": "text"
                                },
                                {
                                    "key": "page",
                                    "value": "1",
                                    "type": "text"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/api/wallet/referral.php",
                            "host": ["{{base_url}}"],
                            "path": ["api", "wallet", "referral.php"]
                        },
                        "description": "추천 보상 내역을 조회합니다."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "action",
                                            "value": "get_rewards",
                                            "type": "text"
                                        },
                                        {
                                            "key": "page",
                                            "value": "1",
                                            "type": "text"
                                        }
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "header": [
                                {
                                    "key": "Content-Type",
                                    "value": "application/json"
                                }
                            ],
                            "cookie": [],
                            "body": "{\n    \"success\": true,\n    \"data\": {\n        \"rewards\": [\n            {\n                \"id\": 1,\n                \"amount\": \"10.0\",\n                \"type\": \"POTEN\"\n            }\n        ]\n    }\n}"
                        }
                    ]
                }
            ]
        },
        {
            "name": "Missions",
            "item": [
                {
                    "name": "Get Mission List",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "// Verify token exists",
                                    "if (!pm.environment.get(\"access_token\")) {",
                                    "    console.error(\"No access token found. Please login first.\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "action",
                                    "value": "get_list",
                                    "type": "text"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/api/wallet/missions.php",
                            "host": ["{{base_url}}"],
                            "path": ["api", "wallet", "missions.php"]
                        },
                        "description": "미션 목록을 조회합니다."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "action",
                                            "value": "get_list",
                                            "type": "text"
                                        }
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "header": [
                                {
                                    "key": "Content-Type",
                                    "value": "application/json"
                                }
                            ],
                            "cookie": [],
                            "body": "{\n    \"success\": true,\n    \"data\": {\n        \"missions\": [\n            {\n                \"id\": 1,\n                \"title\": \"Mission 1\",\n                \"description\": \"Mission 1 description\"\n            }\n        ]\n    }\n}"
                        }
                    ]
                },
                {
                    "name": "Participate Mission",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "// Verify token exists",
                                    "if (!pm.environment.get(\"access_token\")) {",
                                    "    console.error(\"No access token found. Please login first.\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "action",
                                    "value": "participate",
                                    "type": "text"
                                },
                                {
                                    "key": "mission_id",
                                    "value": "1",
                                    "type": "text"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/api/wallet/missions.php",
                            "host": ["{{base_url}}"],
                            "path": ["api", "wallet", "missions.php"]
                        },
                        "description": "미션에 참여합니다."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "action",
                                            "value": "participate",
                                            "type": "text"
                                        },
                                        {
                                            "key": "mission_id",
                                            "value": "1",
                                            "type": "text"
                                        }
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "header": [
                                {
                                    "key": "Content-Type",
                                    "value": "application/json"
                                }
                            ],
                            "cookie": [],
                            "body": "{\n    \"success\": true,\n    \"data\": {\n        \"participation_id\": 1\n    }\n}"
                        }
                    ]
                }
            ]
        },
        {
            "name": "Transactions",
            "item": [
                {
                    "name": "Get Transaction List",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "// Verify token exists",
                                    "if (!pm.environment.get(\"access_token\")) {",
                                    "    console.error(\"No access token found. Please login first.\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "action",
                                    "value": "get_list",
                                    "type": "text"
                                },
                                {
                                    "key": "page",
                                    "value": "1",
                                    "type": "text"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/api/wallet/transactions.php",
                            "host": ["{{base_url}}"],
                            "path": ["api", "wallet", "transactions.php"]
                        },
                        "description": "거래 내역을 조회합니다."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "action",
                                            "value": "get_list",
                                            "type": "text"
                                        },
                                        {
                                            "key": "page",
                                            "value": "1",
                                            "type": "text"
                                        }
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "header": [
                                {
                                    "key": "Content-Type",
                                    "value": "application/json"
                                }
                            ],
                            "cookie": [],
                            "body": "{\n    \"success\": true,\n    \"data\": {\n        \"transactions\": [\n            {\n                \"id\": 1,\n                \"type\": \"deposit\",\n                \"amount\": \"10.0\",\n                \"timestamp\": \"2022-01-01 00:00:00\"\n            }\n        ]\n    }\n}"
                        }
                    ]
                },
                {
                    "name": "Transfer Token",
                    "event": [
                        {
                            "listen": "prerequest",
                            "script": {
                                "exec": [
                                    "// Verify token exists",
                                    "if (!pm.environment.get(\"access_token\")) {",
                                    "    console.error(\"No access token found. Please login first.\");",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{access_token}}"
                            }
                        ],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "action",
                                    "value": "transfer",
                                    "type": "text"
                                },
                                {
                                    "key": "to_address",
                                    "value": "0x1234567890abcdef",
                                    "type": "text"
                                },
                                {
                                    "key": "amount",
                                    "value": "1.0",
                                    "type": "text"
                                },
                                {
                                    "key": "token_type",
                                    "value": "POTEN",
                                    "type": "text"
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{base_url}}/api/wallet/transactions.php",
                            "host": ["{{base_url}}"],
                            "path": ["api", "wallet", "transactions.php"]
                        },
                        "description": "토큰을 전송합니다."
                    },
                    "response": [
                        {
                            "name": "Success",
                            "originalRequest": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "formdata",
                                    "formdata": [
                                        {
                                            "key": "action",
                                            "value": "transfer",
                                            "type": "text"
                                        },
                                        {
                                            "key": "to_address",
                                            "value": "0x1234567890abcdef",
                                            "type": "text"
                                        },
                                        {
                                            "key": "amount",
                                            "value": "1.0",
                                            "type": "text"
                                        },
                                        {
                                            "key": "token_type",
                                            "value": "POTEN",
                                            "type": "text"
                                        }
                                    ]
                                }
                            },
                            "status": "OK",
                            "code": 200,
                            "_postman_previewlanguage": "json",
                            "header": [
                                {
                                    "key": "Content-Type",
                                    "value": "application/json"
                                }
                            ],
                            "cookie": [],
                            "body": "{\n    \"success\": true,\n    \"data\": {\n        \"transaction_id\": 1\n    }\n}"
                        }
                    ]
                }
            ]
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Add authorization header if access token exists",
                    "if (pm.environment.get(\"access_token\")) {",
                    "    pm.request.headers.add({",
                    "        key: \"Authorization\",",
                    "        value: \"Bearer \" + pm.environment.get(\"access_token\")",
                    "    });",
                    "}"
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://aidas3.test",
            "type": "string"
        },
        {
            "key": "supabase_url",
            "value": "https://cmxeczvjzibtwvdagvmx.supabase.co",
            "type": "string",
            "description": "Supabase 프로젝트 URL"
        },
        {
            "key": "supabase_anon_key",
            "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNteGVjenZqemlidHd2ZGFndm14Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU3ODc2OTYsImV4cCI6MjA1MTM2MzY5Nn0.PuA4SJ5lMKnPCUXk9v_fJTgJPy0vZ947oryp1lHln98",
            "type": "string",
            "description": "Supabase Anonymous Key"
        },
        {
            "key": "supabase_test_email",
            "value": "webcgig@gmail.com",
            "type": "string",
            "description": "테스트용 이메일"
        },
        {
            "key": "supabase_test_password",
            "value": "0080a300e!",
            "type": "string",
            "description": "테스트용 비밀번호"
        }
    ]
}
